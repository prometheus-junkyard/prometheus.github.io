<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Prometheus monitoring system and time series database">
    <meta name="keywords" content="prometheus, monitoring, monitoring system, time series, time series database, alerting, metrics, telemetry">
    <meta name="author" content="Prometheus">

    <link rel="alternate" type="application/atom+xml" title="Prometheus Blog Â» Feed" href="/blog/feed.xml">

    <link rel="shortcut icon" href="/assets/favicons/favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/favicons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/favicons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/favicons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/favicons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/favicons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/favicons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/favicons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/favicons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/assets/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/assets/favicons/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/assets/favicons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/assets/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/assets/favicons/android-chrome-manifest.json">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/assets/favicons/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">

    
    <title>Getting started | Prometheus</title>
    

    <!-- Bootstrap core CSS -->
    <link href="/assets/bootstrap-3.3.1/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/assets/docs.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/assets/font-awesome-4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><img src="/assets/prometheus_logo_grey.svg" alt="Prometheus logo"> Prometheus</a>
        </div>
        <div class="collapse navbar-collapse" id="navbar">
          <ul class="nav navbar-nav navbar-right main-nav">
            <li><a href="/">Overview</a></li>
            <li><a href="/docs/introduction/overview/">Documentation</a></li>
            <li><a href="/community/">Community</a></li>
            <li><a href="/blog/">Blog</a></li>
            <li><a href="https://github.com/prometheus"><i class="fa fa-github"></i> Github</a></li>
          </ul>
        </div>
      </div>
    </nav>


<div class="container">
  <div class="row">
    <div class="col-md-3 side-nav-col">
      <ul class="nav navbar-nav side-nav">
        
          <li><span class="nav-header"><i class="fa fa-hand-o-right"></i> Introduction</span><ul class="nav"><li><a href="/docs/introduction/overview/">Overview</a></li><li><a href="/docs/introduction/install/">Installing</a></li><li class="active"><a href="/docs/introduction/getting_started/">Getting started</a></li><li><a href="/docs/introduction/comparison/">Comparison to alternatives</a></li><li><a href="/docs/introduction/faq/">FAQ</a></li><li><a href="/docs/introduction/roadmap/">Roadmap</a></li><li><a href="/docs/introduction/media/">Media</a></li><li><a href="/docs/introduction/glossary/">Glossary</a></li></ul></li>
        
          <li><span class="nav-header"><i class="fa fa-flask"></i> Concepts</span><ul class="nav"><li><a href="/docs/concepts/data_model/">Data model</a></li><li><a href="/docs/concepts/metric_types/">Metric types</a></li><li><a href="/docs/concepts/jobs_instances/">Jobs and instances</a></li></ul></li>
        
          <li><span class="nav-header"><i class="fa fa-search"></i> Querying</span><ul class="nav"><li><a href="/docs/querying/basics/">Basics</a></li><li><a href="/docs/querying/operators/">Operators</a></li><li><a href="/docs/querying/functions/">Functions</a></li><li><a href="/docs/querying/examples/">Examples</a></li><li><a href="/docs/querying/rules/">Recording rules</a></li><li><a href="/docs/querying/api/">HTTP API</a></li></ul></li>
        
          <li><span class="nav-header"><i class="fa fa-line-chart"></i> Visualization</span><ul class="nav"><li><a href="/docs/visualization/browser/">Expression browser</a></li><li><a href="/docs/visualization/promdash/">PromDash</a></li><li><a href="/docs/visualization/consoles/">Console templates</a></li><li><a href="/docs/visualization/template_examples/">Template examples</a></li><li><a href="/docs/visualization/template_reference/">Template reference</a></li><li><a href="/docs/visualization/grafana/">Grafana</a></li></ul></li>
        
          <li><span class="nav-header"><i class="fa fa-code"></i> Instrumenting</span><ul class="nav"><li><a href="/docs/instrumenting/clientlibs/">Client libraries</a></li><li><a href="/docs/instrumenting/pushing/">Pushing metrics</a></li><li><a href="/docs/instrumenting/exporters/">Exporters and third-party integrations</a></li><li><a href="/docs/instrumenting/exposition_formats/">Exposition formats</a></li></ul></li>
        
          <li><span class="nav-header"><i class="fa fa-cog"></i> Operating</span><ul class="nav"><li><a href="/docs/operating/configuration/">Configuration</a></li><li><a href="/docs/operating/storage/">Storage</a></li><li><a href="/docs/operating/federation/">Federation</a></li></ul></li>
        
          <li><span class="nav-header"><i class="fa fa-bell-o"></i> Alerting</span><ul class="nav"><li><a href="/docs/alerting/overview/">Alerting overview</a></li><li><a href="/docs/alerting/alertmanager/">Alertmanager</a></li><li><a href="/docs/alerting/rules/">Alerting rules</a></li></ul></li>
        
          <li><span class="nav-header"><i class="fa fa-thumbs-o-up"></i> Best practices</span><ul class="nav"><li><a href="/docs/practices/naming/">Metric and label naming</a></li><li><a href="/docs/practices/consoles/">Consoles and dashboards</a></li><li><a href="/docs/practices/instrumentation/">Instrumentation</a></li><li><a href="/docs/practices/histograms/">Histograms and summaries</a></li><li><a href="/docs/practices/alerting/">Alerting</a></li><li><a href="/docs/practices/rules/">Recording rules</a></li></ul></li>
        
      </ul>
    </div>

    <div class="col-md-9 doc-content">
      <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1 id="getting-started" class="page-header">Getting started<a class="header-anchor" href="#getting-started" name="getting-started"></a>
</h1>
<div class="toc toc-right"><ul>
<li><a href="#downloading-and-running-prometheus">Downloading and running Prometheus
</a></li>
<li><a href="#configuring-prometheus-to-monitor-itself">Configuring Prometheus to monitor itself
</a></li>
<li><a href="#starting-prometheus">Starting Prometheus
</a></li>
<li><a href="#using-the-expression-browser">Using the expression browser
</a></li>
<li><a href="#using-the-graphing-interface">Using the graphing interface
</a></li>
<li><a href="#starting-up-some-sample-targets">Starting up some sample targets
</a></li>
<li><a href="#configuring-prometheus-to-monitor-the-sample-targets">Configuring Prometheus to monitor the sample targets
</a></li>
<li><a href="#configure-rules-for-aggregating-scraped-data-into-new-time-series">Configure rules for aggregating scraped data into new time series
</a></li>
</ul></div>

<p>This guide is a "Hello World"-style tutorial which shows how to install,
configure, and use Prometheus in a simple example setup. You will download and run
Prometheus locally, configure it to scrape itself and an example application,
and then work with queries, rules, and graphs to make use of the collected time
series data.</p>

<h2 id="downloading-and-running-prometheus">Downloading and running Prometheus<a class="header-anchor" href="#downloading-and-running-prometheus" name="downloading-and-running-prometheus"></a>
</h2>

<p><a href="https://github.com/prometheus/prometheus/releases">Download the latest release</a>
of Prometheus for your platform, then extract and run it:</p>

<pre><code>tar xvfz prometheus-*.tar.gz
cd prometheus-*
./prometheus
</code></pre>

<p>It should fail to start, complaining about the absence of a configuration file.</p>

<h2 id="configuring-prometheus-to-monitor-itself">Configuring Prometheus to monitor itself<a class="header-anchor" href="#configuring-prometheus-to-monitor-itself" name="configuring-prometheus-to-monitor-itself"></a>
</h2>

<p>Prometheus collects metrics from monitored targets by scraping metrics HTTP
endpoints on these targets. Since Prometheus also exposes data in the same
manner about itself, it can also scrape and monitor its own health.</p>

<p>While a Prometheus server that collects only data about itself is not very
useful in practice, it is a good starting example. Save the following basic
Prometheus configuration as a file named <code>prometheus.yml</code>:</p>

<pre><code>global:
  scrape_interval:     15s # By default, scrape targets every 15 seconds.
  evaluation_interval: 15s # By default, scrape targets every 15 seconds.
  # scrape_timeout is set to the global default (10s).

  # Attach these labels to any time series or alerts when communicating with
  # external systems (federation, remote storage, Alertmanager).
  external_labels:
    monitor: 'codelab-monitor'

# A scrape configuration containing exactly one endpoint to scrape:
# Here it's Prometheus itself.
scrape_configs:
  # The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.
  - job_name: 'prometheus'

    # Override the global default and scrape targets from this job every 5 seconds.
    scrape_interval: 5s
    scrape_timeout: 10s

    target_groups:
      - targets: ['localhost:9090']
</code></pre>

<p>For a complete specification of configuration options, see the
<a href="/docs/operating/configuration">configuration documentation</a>.</p>

<h2 id="starting-prometheus">Starting Prometheus<a class="header-anchor" href="#starting-prometheus" name="starting-prometheus"></a>
</h2>

<p>To start Prometheus with your newly created configuration file, change to your
Prometheus build directory and run:</p>

<pre><code class="language-bash"><span class="c"># Start Prometheus.</span>
<span class="c"># By default, Prometheus stores its database in ./data (flag -storage.local.path).</span>
./prometheus -config.file<span class="o">=</span>prometheus.yml</code></pre>

<p>Prometheus should start up and it should show a status page about itself at
<a href="http://localhost:9090">http://localhost:9090</a>. Give it a couple of seconds to collect data about itself
from its own HTTP metrics endpoint.</p>

<p>You can also verify that Prometheus is serving metrics about itself by
navigating to its metrics endpoint: <a href="http://localhost:9090/metrics">http://localhost:9090/metrics</a></p>

<p>The number of OS threads executed by Prometheus is controlled by the
<code>GOMAXPROCS</code> environment variable. As of Go 1.5 the default value is
the number of cores available.</p>

<p>Blindly setting <code>GOMAXPROCS</code> to a high value can be
counterproductive. See the relevant <a href="http://golang.org/doc/faq#Why_no_multi_CPU">Go
FAQs</a>.</p>

<h2 id="using-the-expression-browser">Using the expression browser<a class="header-anchor" href="#using-the-expression-browser" name="using-the-expression-browser"></a>
</h2>

<p>Let us try looking at some data that Prometheus has collected about itself. To
use Prometheus's built-in expression browser, navigate to
<a href="http://localhost:9090/graph">http://localhost:9090/graph</a> and choose the "Console" view within the "Graph"
tab.</p>

<p>As you can gather from <a href="http://localhost:9090/metrics">http://localhost:9090/metrics</a>, one metric that
Prometheus exports about itself is called
<code>prometheus_target_interval_length_seconds</code> (the actual amount of time between
target scrapes). Go ahead and enter this into the expression console:</p>

<pre><code>prometheus_target_interval_length_seconds
</code></pre>

<p>This should return a lot of different time series (along with the latest value
recorded for each), all with the metric name
<code>prometheus_target_interval_length_seconds</code>, but with different labels. These
labels designate different latency percentiles and target group intervals.</p>

<p>If we were only interested in the 99th percentile latencies, we could use this
query to retrieve that information:</p>

<pre><code>prometheus_target_interval_length_seconds{quantile="0.99"}
</code></pre>

<p>To count the number of returned time series, you could write:</p>

<pre><code>count(prometheus_target_interval_length_seconds)
</code></pre>

<p>For more about the expression language, see the
<a href="/docs/querying/basics/">expression language documentation</a>.</p>

<h2 id="using-the-graphing-interface">Using the graphing interface<a class="header-anchor" href="#using-the-graphing-interface" name="using-the-graphing-interface"></a>
</h2>

<p>To graph expressions, navigate to <a href="http://localhost:9090/graph">http://localhost:9090/graph</a> and use the "Graph"
tab.</p>

<p>For example, enter the following expression to graph the per-second rate of all
storage chunk operations happening in the self-scraped Prometheus:</p>

<pre><code>rate(prometheus_local_storage_chunk_ops_total[1m])
</code></pre>

<p>Experiment with the graph range parameters and other settings.</p>

<h2 id="starting-up-some-sample-targets">Starting up some sample targets<a class="header-anchor" href="#starting-up-some-sample-targets" name="starting-up-some-sample-targets"></a>
</h2>

<p>Let us make this more interesting and start some example targets for Prometheus
to scrape.</p>

<p>The Go client library includes an example which exports fictional RPC latencies
for three services with different latency distributions.</p>

<p>Ensure you have the <a href="https://golang.org/doc/install">Go compiler installed</a> and
have a <a href="https://golang.org/doc/code.html">working Go build environment</a> (with
correct <code>GOPATH</code>) set up. For some of the dependencies that <code>go get</code> will
fetch, you will also need to have the
<a href="https://www.mercurial-scm.org/">Mercurial</a> revision control system (<code>hg</code>
command) installed.</p>

<p>Download the Go client library for Prometheus and run three of these example
processes:</p>

<pre><code class="bash"># Fetch the client library code and compile example.
git clone https://github.com/prometheus/client_golang.git
cd client_golang/examples/random
go get -d
go build

# Start 3 example targets in separate terminals:
./random -listen-address=:8080
./random -listen-address=:8081
./random -listen-address=:8082
</code></pre>

<p>You should now have example targets listening on <a href="http://localhost:8080/metrics">http://localhost:8080/metrics</a>,
<a href="http://localhost:8081/metrics">http://localhost:8081/metrics</a>, and <a href="http://localhost:8082/metrics">http://localhost:8082/metrics</a>.</p>

<h2 id="configuring-prometheus-to-monitor-the-sample-targets">Configuring Prometheus to monitor the sample targets<a class="header-anchor" href="#configuring-prometheus-to-monitor-the-sample-targets" name="configuring-prometheus-to-monitor-the-sample-targets"></a>
</h2>

<p>Now we will configure Prometheus to scrape these new targets. Let's group all
three endpoints into one job called <code>example-random</code>. However, imagine that the
first two endpoints are production targets, while the third one represents a
canary instance. To model this in Prometheus, we can add several groups of
endpoints to a single job, adding extra labels to each group of targets. In
this example, we will add the <code>group="production"</code> label to the first group of
targets, while adding <code>group="canary"</code> to the second.</p>

<p>To achieve this, add the following job definition to the <code>scrape_configs</code>
section in your <code>prometheus.yml</code> and restart your Prometheus instance:</p>

<pre><code>scrape_configs:
  - job_name:       'example-random'

    # Override the global default and scrape targets from this job every 5 seconds.
    scrape_interval: 5s
    scrape_timeout: 10s

    target_groups:
      - targets: ['localhost:8080', 'localhost:8081']
        labels:
          group: 'production'

      - targets: ['localhost:8082']
        labels:
          group: 'canary'
</code></pre>

<p>Go to the expression browser and verify that Prometheus now has information
about time series that these example endpoints expose, such as the
<code>rpc_durations_microseconds</code> metric.</p>

<h2 id="configure-rules-for-aggregating-scraped-data-into-new-time-series">Configure rules for aggregating scraped data into new time series<a class="header-anchor" href="#configure-rules-for-aggregating-scraped-data-into-new-time-series" name="configure-rules-for-aggregating-scraped-data-into-new-time-series"></a>
</h2>

<p>Though not a problem in our example, queries that aggregate over thousands of
time series can get slow when computed ad-hoc. To make this more efficient,
Prometheus allows you to prerecord expressions into completely new persisted
time series via configured recording rules. Let's say we are interested in
recording the per-second rate of example RPCs
(<code>rpc_durations_microseconds_count</code>) averaged over all instances (but
preserving the <code>job</code> and <code>service</code> dimensions) as measured over a window of 5
minutes. We could write this as:</p>

<pre><code>avg(rate(rpc_durations_microseconds_count[5m])) by (job, service)
</code></pre>

<p>Try graphing this expression.</p>

<p>To record the time series resulting from this expression into a new metric
called <code>job_service:rpc_durations_microseconds_count:avg_rate5m</code>, create a file
with the following recording rule and save it as <code>prometheus.rules</code>:</p>

<pre><code>job_service:rpc_durations_microseconds_count:avg_rate5m = avg(rate(rpc_durations_microseconds_count[5m])) by (job, service)
</code></pre>

<p>To make Prometheus pick up this new rule, add a <code>rule_files</code> statement to the
global configuration section in your <code>prometheus.yml</code>. The config should now
look like this:</p>

<pre><code>global:
  scrape_interval:     15s # By default, scrape targets every 15 seconds.
  evaluation_interval: 15s # By default, scrape targets every 15 seconds.
  # scrape_timeout is set to the global default (10s).

  # Attach these extra labels to all timeseries collected by this Prometheus instance.
  external_labels:
    monitor: 'codelab-monitor'

rule_files:
  - 'prometheus.rules'

scrape_configs:
  - job_name: 'prometheus'

    # Override the global default and scrape targets from this job every 5 seconds.
    scrape_interval: 5s
    scrape_timeout: 10s

    target_groups:
      - targets: ['localhost:9090']

  - job_name:       'example-random'

    # Override the global default and scrape targets from this job every 5 seconds.
    scrape_interval: 5s
    scrape_timeout: 10s

    target_groups:
      - targets: ['localhost:8080', 'localhost:8081']
        labels:
          group: 'production'

      - targets: ['localhost:8082']
        labels:
          group: 'canary'
</code></pre>

<p>Restart Prometheus with the new configuration and verify that a new time series
with the metric name <code>job_service:rpc_durations_microseconds_count:avg_rate5m</code>
is now available by querying it through the expression browser or graphing it.</p>
</body></html>

    </div>

  </div>
  <hr>

<footer>
  <p class="pull-left">
    &copy; Prometheus Authors 2015
  </p>
</footer>

</div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="/assets/bootstrap-3.3.1/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/assets/ie10-viewport-bug-workaround.js"></script>
    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-58468480-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>

